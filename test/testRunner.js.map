{"version":3,"sources":["test/testRunner.es6"],"names":[],"mappings":"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","file":"test/testRunner.es6","sourcesContent":["let compiler = require('../dist/compiler'),\n    parser = require('../dist/parser');\n\nfunction runSuites(suites) {\n  let container = document.querySelector('#output');\n  suites.forEach(suite => {\n    suite.forEach(test => {\n      let html = test.template;\n      let ast = parser.parse(html);\n      let compiledTemplate = compiler.compile(ast, 'abc');\n      let tl;\n      eval(`tl = ${compiledTemplate};`);\n      let out = tl.render(test.context);\n      let res = compareNodes(out, test.expectedDom);\n      if (!res) {\n        let div = document.createElement('div');\n        div.appendChild(out);\n        test.fail = `Expected ${div.innerHTML} to equal ${test.expectedHtml}`;\n      }\n      container.appendChild(createTestOutput(test, res));\n    });\n  });\n}\n\nfunction createTestOutput(test, res) {\n  let li = document.createElement('li');\n  let desc = document.createElement('p');\n  desc.innerHTML = test.description;\n  li.appendChild(desc);\n  if (test.fail) {\n    li.appendChild(document.createTextNode(test.fail))\n  } else {\n    li.classList.add('pass');\n  }\n  return li;\n}\n\n// Compare DOM nodes for equality\nfunction compareNodes(a, b) {\n  var aChildren = a.childNodes || [];\n  var bChildren = b.childNodes || [];\n  var aAttributes = a.attributes || [];\n  var bAttributes = b.attributes || [];\n  console.log(a.nodeType);\n  if (a.nodeType !== b.nodeType) {\n    return false;\n  }\n  if (a.nodeType === 3 && a.data !== b.data) {\n    // Compare text node values\n    return false;\n  }\n  if ((aChildren.length !== bChildren.length) ||\n      (aAttributes.length !== bAttributes.length)) {\n    return false;\n  }\n  if (!compareAttrs(aAttributes, bAttributes)) {\n    return false;\n  }\n  for (var i=0, len=aChildren.length; i<len; i++) {\n    return compareNodes(aChildren[i], bChildren[i]);\n  }\n  return true;\n}\n\n// Compare the attributes of two nodes for equality\nfunction compareAttrs(a, b) {\n  var attr, attrName;\n  for (var i=0, len=a.length; i<len; i++) {\n    attr = a[0];\n    attrName = attr.name;\n    if (!b[attrName] || b[attrName].value !== attr.value) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = {\n  runSuites: runSuites\n};\n"]}